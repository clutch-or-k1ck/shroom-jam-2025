[gd_scene load_steps=29 format=3 uid="uid://bqnhgrmahpp44"]

[ext_resource type="Script" uid="uid://cc7qw8macbkml" path="res://scenes/chase_scene/chase_scene.gd" id="1_8pw8v"]
[ext_resource type="PackedScene" uid="uid://y4on5eclsc2c" path="res://scenes/duck_character/duck_character.tscn" id="1_m83pa"]
[ext_resource type="PackedScene" uid="uid://y4hccnwhpc3e" path="res://scenes/running_text_widget/running_text_widget.tscn" id="2_a4cdl"]
[ext_resource type="Texture2D" uid="uid://bh8cccfqnjbbb" path="res://assets/2d/Sky.png" id="2_b8in7"]
[ext_resource type="Texture2D" uid="uid://cookxxbmq5r6d" path="res://assets/2d/Ground_Main.png" id="2_ucmrg"]
[ext_resource type="PackedScene" uid="uid://rinq6u86110t" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_city_back.tscn" id="4_4p7bp"]
[ext_resource type="PackedScene" uid="uid://bsnf513113sfi" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_city_front.tscn" id="4_jqnf2"]
[ext_resource type="Script" uid="uid://beehhs7t2qyd" path="res://scenes/treadmill/treadmill.gd" id="4_myeqy"]
[ext_resource type="PackedScene" uid="uid://blo15if732qre" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_clouds.tscn" id="4_v4kp3"]
[ext_resource type="PackedScene" uid="uid://d0gundbavq47b" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_brick.tscn" id="5_myeqy"]
[ext_resource type="PackedScene" uid="uid://dk72dfih4oswg" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_fence_1.tscn" id="5_t50dl"]
[ext_resource type="PackedScene" uid="uid://cbm4li6t68yd2" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_tree_1.tscn" id="6_5qs4y"]
[ext_resource type="PackedScene" uid="uid://bqkucl7xa4j03" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_fence_2.tscn" id="6_dkpwp"]
[ext_resource type="PackedScene" uid="uid://gplrm6pp2dtk" path="res://scenes/treadmill/treadmill_item/item_variations/treadmill_tree_2.tscn" id="7_v4kp3"]
[ext_resource type="Texture2D" uid="uid://dxb3jmgumh2vd" path="res://assets/2d/UI_Breaking_News.png" id="9_dkpwp"]
[ext_resource type="PackedScene" uid="uid://ba0w1kf6h68wb" path="res://scenes/treadmill/treadmill_item/item_variations/tm_pillar.tscn" id="9_hjabt"]
[ext_resource type="Texture2D" uid="uid://y8wbnag6yxbr" path="res://assets/2d/UI_LIVE.png" id="10_envix"]
[ext_resource type="PackedScene" uid="uid://bf68uovsnajdd" path="res://scenes/treadmill/treadmill_item/item_variations/tm_fence_3.tscn" id="10_qrt7r"]
[ext_resource type="PackedScene" uid="uid://c8lnt2dejstw8" path="res://scenes/treadmill/treadmill_item/item_variations/tm_barrel_obstacle_1.tscn" id="11_4yt5v"]
[ext_resource type="Texture2D" uid="uid://nlp7x7wcx5qh" path="res://assets/2d/UI_Heart.png" id="11_q31dt"]
[ext_resource type="PackedScene" uid="uid://bsrnp6eyr2j8t" path="res://scenes/treadmill/treadmill_item/item_variations/tm_cones_1.tscn" id="12_w4tmd"]
[ext_resource type="PackedScene" uid="uid://ctsesmh2kgbr6" path="res://scenes/treadmill/treadmill_item/item_variations/tm_barrel_obstacle_2.tscn" id="13_01fa4"]
[ext_resource type="PackedScene" uid="uid://c0h0c0n624xcm" path="res://scenes/treadmill/treadmill_item/item_variations/tm_two_fences_and_sign.tscn" id="14_4yt5v"]
[ext_resource type="PackedScene" uid="uid://bti58niu6f3dw" path="res://scenes/treadmill/treadmill_item/item_variations/tm_policeman.tscn" id="18_gxndn"]
[ext_resource type="AudioStream" uid="uid://coqowv0r6vkmm" path="res://assets/sounds/Joker Dance.ogg" id="24_qrt7r"]
[ext_resource type="PackedScene" uid="uid://c416uit0sv5f2" path="res://ui/game_menu.tscn" id="26_m2ntv"]
[ext_resource type="Script" uid="uid://ciq8odnuga3oh" path="res://scenes/bombardment_system/bombardier.gd" id="26_sdicq"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a4cdl"]
size = Vector2(2692, 110)

[node name="root" type="Node2D"]
script = ExtResource("1_8pw8v")
starting_world_speed = 1800
death_ends_game = false

[node name="bombardier" type="Node2D" parent="."]
z_index = 10
position = Vector2(0, 816)
script = ExtResource("26_sdicq")
metadata/_custom_type_script = "uid://ciq8odnuga3oh"

[node name="sky_polygon" type="Polygon2D" parent="."]
texture = ExtResource("2_b8in7")
polygon = PackedVector2Array(1, -1, -2, 553, 2730, 552, 2726, 3)
uv = PackedVector2Array(1, -1, -2, 1041.42, 3847.25, 1025.14, 3839.11, -6.14028)

[node name="treadmill_clouds" type="Node2D" parent="."]
position = Vector2(0, 269)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("4_v4kp3")])
global_speed_multiplier = 0.01
spawn_method = 1
spawn_probability = 0.2
apply_random_scaling = true
random_scale_min = 0.8
random_scale_max = 1.2
apply_random_displacement = true
random_displacement_min = Vector2(0, -100)
random_displacement_max = Vector2(0, 100)
enable_prespawn = true
prespawn_samples = 30
prespawn_probability = 0.1
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="city_backdrop" type="Node2D" parent="."]
position = Vector2(0, 486)

[node name="treadmill_city_back" type="Node2D" parent="city_backdrop"]
position = Vector2(0, -27)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("4_4p7bp")])
global_speed_multiplier = 0.03
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="treadmill_city_front" type="Node2D" parent="city_backdrop"]
position = Vector2(0, -38)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("4_jqnf2")])
global_speed_multiplier = 0.1
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="road" type="Node2D" parent="."]
position = Vector2(0, 919)

[node name="treadmill_trees" type="Node2D" parent="road"]
position = Vector2(0, -476)
scale = Vector2(1, 0.727)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("6_5qs4y"), ExtResource("7_v4kp3")])
global_speed_multiplier = 0.2
spawn_method = 1
spawn_probability = 0.4
apply_random_scaling = true
random_scale_min = 0.8
random_scale_max = 1.2
apply_random_displacement = true
random_displacement_max = Vector2(0, 40)
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="road_collision" type="StaticBody2D" parent="road"]
position = Vector2(0, -118)

[node name="collision_shape" type="CollisionShape2D" parent="road/road_collision"]
position = Vector2(1347, 61.0001)
shape = SubResource("RectangleShape2D_a4cdl")

[node name="pavement_visual" type="Polygon2D" parent="road"]
position = Vector2(9, -208.888)
scale = Vector2(1, 2.00862)
texture = ExtResource("2_ucmrg")
polygon = PackedVector2Array(-9, -136.966, 2677, -136.966, 2679, 162.248, -8, 162.248)
uv = PackedVector2Array(-2.88409, 1.21918, 3841.91, 7.33509, 3845.91, 1179.26, 3.23183, 1197.11)

[node name="sidewalk_top" type="Node2D" parent="road"]
position = Vector2(0, -441)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("5_myeqy")])
global_speed_multiplier = 0.3
apply_random_scaling = true
random_scale_min = 0.7
random_scale_max = 0.7
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="sidewalk_top_objects" type="Node2D" parent="road/sidewalk_top"]
z_index = 1
position = Vector2(0, -11)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("10_qrt7r"), ExtResource("14_4yt5v")])
global_speed_multiplier = 0.3
spawn_method = 1
spawn_probability = 0.4
apply_random_scaling = true
random_scale_min = 0.5
random_scale_max = 0.5
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="sidewalk_middle" type="Node2D" parent="road"]
position = Vector2(0, -256)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("5_myeqy")])
global_speed_multiplier = 0.6
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="sidewalk_middle_objects" type="Node2D" parent="road/sidewalk_middle"]
z_index = 1
position = Vector2(0, -14)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("5_t50dl"), ExtResource("6_dkpwp"), ExtResource("14_4yt5v")])
global_speed_multiplier = 0.6
spawn_method = 1
spawn_probability = 0.5
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="obstacles" type="Node2D" parent="road"]
position = Vector2(0, -112)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("11_4yt5v"), ExtResource("12_w4tmd"), ExtResource("13_01fa4")])
global_speed_multiplier = 0.9
spawn_method = 1
spawn_probability = 1.0
treadmill_group = 1
start_active = false
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="policemen" type="Node2D" parent="road"]
position = Vector2(0, -758)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("18_gxndn")])
global_speed_multiplier = 0.9
spawn_method = 1
spawn_probability = 0.2
treadmill_group = 1
start_active = false
apply_random_scaling = true
random_scale_min = 0.95
random_scale_max = 1.05
apply_random_displacement = true
random_displacement_min = Vector2(0, -5)
random_displacement_max = Vector2(0, 5)
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="sidewalk_bottom" type="Node2D" parent="road"]
position = Vector2(0, 7)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("5_myeqy")])
global_speed_multiplier = 3.2
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="sidewalk_bottom_objects" type="Node2D" parent="road/sidewalk_bottom"]
z_index = 1
position = Vector2(0, -18)
script = ExtResource("4_myeqy")
item_types = Array[PackedScene]([ExtResource("9_hjabt")])
global_speed_multiplier = 3.2
spawn_method = 1
spawn_probability = 0.4
metadata/_custom_type_script = "uid://beehhs7t2qyd"

[node name="duck_character" parent="." node_paths=PackedStringArray("ground_reference") instance=ExtResource("1_m83pa")]
z_index = 2
position = Vector2(288, 0)
stamina_regeneration_rate = 25.0
jump_velocity = -2000
jump_velocity_calibration_coef = 0.5
zero_g_velocity_tolerance = 0.001
air_dash_zone = 0.08
speed = 400
zero_g_grace_period = 0.1
left_strafe_speed_scale_factor = 2.5
dashing_distance = 500.0
dashing_velocity = 1900.0
ground_reference = NodePath("../road/road_collision")

[node name="ui" type="CanvasLayer" parent="."]

[node name="top_left_widget" type="VBoxContainer" parent="ui"]
offset_left = 206.95
offset_top = 130.0
offset_right = 570.0
offset_bottom = 256.0

[node name="breaking_news_label" type="TextureRect" parent="ui/top_left_widget"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 2.0
texture = ExtResource("9_dkpwp")
expand_mode = 1
stretch_mode = 4

[node name="spacer" type="Control" parent="ui/top_left_widget"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1

[node name="stam_bar" type="ProgressBar" parent="ui/top_left_widget"]
layout_mode = 2
size_flags_vertical = 3
max_value = 1.0
show_percentage = false

[node name="top_right_widget" type="VBoxContainer" parent="ui"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -420.895
offset_top = 145.485
offset_right = -236.895
offset_bottom = 287.485
grow_horizontal = 0

[node name="live_label" type="TextureRect" parent="ui/top_right_widget"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 2.0
texture = ExtResource("10_envix")
expand_mode = 3
stretch_mode = 4

[node name="spacer" type="Control" parent="ui/top_right_widget"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1

[node name="hearts" type="HBoxContainer" parent="ui/top_right_widget"]
layout_mode = 2
size_flags_vertical = 3

[node name="heart1" type="TextureRect" parent="ui/top_right_widget/hearts"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("11_q31dt")
expand_mode = 1
stretch_mode = 5

[node name="heart2" type="TextureRect" parent="ui/top_right_widget/hearts"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("11_q31dt")
expand_mode = 1
stretch_mode = 5

[node name="heart3" type="TextureRect" parent="ui/top_right_widget/hearts"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("11_q31dt")
expand_mode = 1
stretch_mode = 5

[node name="heart4" type="TextureRect" parent="ui/top_right_widget/hearts"]
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("11_q31dt")
expand_mode = 1
stretch_mode = 5

[node name="game_menu" parent="ui" instance=ExtResource("26_m2ntv")]
visible = false

[node name="running_text" parent="ui" instance=ExtResource("2_a4cdl")]
z_index = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -194.0
offset_bottom = -154.0
grow_vertical = 0
breaking_news = Array[String](["[color=orange]BREAKING NEWS[/color] [color=red]AI[/color] IS TAKING OVER. YOU, ME, EVERYBODY IS SOON GOING TO BE REPLACED BY [color=red]AI[/color].", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS", "BREAKING NEWS"])
running_text_speed = -250
running_text_font_size = 60

[node name="music_player" type="AudioStreamPlayer" parent="."]
stream = ExtResource("24_qrt7r")
autoplay = true
parameters/looping = true

[connection signal="dead" from="duck_character" to="." method="_on_duck_character_dead"]
[connection signal="lives_updated" from="duck_character" to="." method="_on_duck_character_lives_updated"]
[connection signal="stamina_updated" from="duck_character" to="." method="_on_duck_character_stamina_updated"]
